_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{"20a2":function(e,n,t){e.exports=t("nOHt")},"6Kf1":function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var r=t("nKUr"),u=t("vJKn"),c=t.n(u),o=t("rg98"),a=t("20a2"),s=t("q1tI"),i=t("VS8K"),f=function(){var e=Object(o.a)(c.a.mark((function e(n){var t,r,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.includes("id_token")?i.c:i.b,e.next=3,fetch(t+n);case 3:return r=e.sent,e.next=6,r.json();case 6:return u=e.sent,e.abrupt("return",{token:u.jwt,user:{id:u.user.id,username:u.user.username,email:u.user.email,avatar:u.user.avatar?u.user.avatar.formats.thumbnail:null}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=Object(s.createContext)(null);n.b=d;function l(e){var n=e.children,t=Object(s.useState)(null),u=t[0],i=t[1],l=Object(a.useRouter)(),v=function(){var e=Object(o.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("id_token"in l.query)&&!("access_token"in l.query)){e.next=7;break}return e.next=3,f(location.search);case 3:n=e.sent,l.replace("/"),sessionStorage.setItem("session",JSON.stringify(n)),i(n.user);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){try{return JSON.parse(sessionStorage.getItem("session"))}catch(e){return console.error(e.message),null}};return Object(r.jsx)(d.Provider,{value:{user:u,login:v,logout:function(){sessionStorage.removeItem("session"),i(null),l.push("/")},getToken:function(){return p().token},isUserLoggedIn:function(){return!!p()},useSession:function(){Object(s.useEffect)((function(){var e=p();i(null===e||void 0===e?void 0:e.user)}),[])}},children:n})}},Lvf5:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment/delivery",function(){return t("xHbI")}])},VS8K:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"e",(function(){return u})),t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return o})),t.d(n,"d",(function(){return a})),t.d(n,"f",(function(){return s}));var r="http://cuatl.shop/api",u=12,c="".concat(r,"/auth/facebook/callback"),o=("".concat(r,"/connect/facebook"),"http://165.227.199.69:1337/auth/google/callback"),a="".concat(r,"/connect/google/"),s="pk_test_51Hw15gJ4rvPOyPXnQ6Rjf7X4RxmsSBqvTVy3h3Bfwdo2WddlWAgC64bzfHeQbn4V5jJpPrJ7eHeWrGQMWOlRzW8700mrQLCJpL"},rg98:function(e,n,t){"use strict";function r(e,n,t,r,u,c,o){try{var a=e[c](o),s=a.value}catch(i){return void t(i)}a.done?n(s):Promise.resolve(s).then(r,u)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(u,c){var o=e.apply(n,t);function a(e){r(o,u,c,a,s,"next",e)}function s(e){r(o,u,c,a,s,"throw",e)}a(void 0)}))}}t.d(n,"a",(function(){return u}))},xHbI:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return d}));var r=t("nKUr"),u=t("vJKn"),c=t.n(u),o=t("rg98"),a=t("20a2"),s=t("q1tI"),i=t("VS8K"),f=t("6Kf1");function d(){var e=Object(s.useContext)(f.b),n=e.user,t=e.getToken,u=Object(a.useRouter)(),d=function(e,n){var t=Object(s.useState)([]),r=t[0],u=t[1];return Object(s.useEffect)((function(){!function(){var t=Object(o.a)(c.a.mark((function t(){var r,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=17;break}return t.prev=1,t.next=4,n();case 4:return r=t.sent,t.next=7,fetch("".concat(i.a,"/orders"),{headers:{Authorization:"Bearer ".concat(r)}});case 7:return o=t.sent,t.next=10,o.json();case 10:a=t.sent,u(a),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),u([]);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),r}(n,t);return Object(s.useEffect)((function(){n||u.push("/sign_in")}),[]),Object(r.jsx)(r.Fragment,{children:d?d.map((function(e){return Object(r.jsxs)("div",{children:[new Date(e.createdAt).toLocaleDateString("es-MX"),e.product.name,e.total,e.status]},"order.id")})):Object(r.jsx)("div",{children:"Sin \xf3rdenes"})})}}},[["Lvf5",0,1,2,3]]]);