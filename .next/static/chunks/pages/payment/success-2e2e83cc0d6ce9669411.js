_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"20a2":function(n,e,t){n.exports=t("nOHt")},"3MQS":function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment/success",function(){return t("pQgT")}])},"6Kf1":function(n,e,t){"use strict";t.d(e,"a",(function(){return l}));var r=t("nKUr"),u=t("o0o1"),o=t.n(u),c=t("HaE+"),s=t("20a2"),a=t("q1tI"),i=t("VS8K"),f=function(){var n=Object(c.a)(o.a.mark((function n(e){var t,r,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.includes("id_token")?i.d:i.b,n.next=3,fetch(t+e);case 3:return r=n.sent,n.next=6,r.json();case 6:return u=n.sent,n.abrupt("return",{token:u.jwt,user:{id:u.user.id,username:u.user.username,email:u.user.email,avatar:u.user.avatar?u.user.avatar.formats.thumbnail:null}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),d=Object(a.createContext)(null);e.b=d;function l(n){var e=n.children,t=Object(a.useState)(null),u=t[0],i=t[1],l=Object(s.useRouter)(),p=function(){var n=Object(c.a)(o.a.mark((function n(){var e;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!("id_token"in l.query)&&!("access_token"in l.query)){n.next=7;break}return n.next=3,f(location.search);case 3:e=n.sent,l.replace("/"),sessionStorage.setItem("session",JSON.stringify(e)),i(e.user);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),v=function(){try{return JSON.parse(sessionStorage.getItem("session"))}catch(n){return console.error(n.message),null}};return Object(r.jsx)(d.Provider,{value:{user:u,login:p,logout:function(){sessionStorage.removeItem("session"),i(null),l.push("/")},getToken:function(){return v().token},isUserLoggedIn:function(){return!!v()},useSession:function(){Object(a.useEffect)((function(){var n=v();i(null===n||void 0===n?void 0:n.user)}),[])}},children:e})}},"HaE+":function(n,e,t){"use strict";function r(n,e,t,r,u,o,c){try{var s=n[o](c),a=s.value}catch(i){return void t(i)}s.done?e(a):Promise.resolve(a).then(r,u)}function u(n){return function(){var e=this,t=arguments;return new Promise((function(u,o){var c=n.apply(e,t);function s(n){r(c,u,o,s,a,"next",n)}function a(n){r(c,u,o,s,a,"throw",n)}s(void 0)}))}}t.d(e,"a",(function(){return u}))},VS8K:function(n,e,t){"use strict";t.d(e,"a",(function(){return r})),t.d(e,"f",(function(){return u})),t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return c})),t.d(e,"d",(function(){return s})),t.d(e,"e",(function(){return a})),t.d(e,"g",(function(){return i}));var r="http://165.227.199.69:1337",u=12,o="".concat(r,"/auth/facebook/callback"),c="".concat(r,"/connect/facebook"),s="".concat(r,"/auth/google/callback"),a="".concat(r,"/connect/google"),i="pk_test_51Hw15gJ4rvPOyPXnQ6Rjf7X4RxmsSBqvTVy3h3Bfwdo2WddlWAgC64bzfHeQbn4V5jJpPrJ7eHeWrGQMWOlRzW8700mrQLCJpL"},pQgT:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return d}));var r=t("nKUr"),u=t("o0o1"),o=t.n(u),c=t("HaE+"),s=t("20a2"),a=t("q1tI"),i=t("VS8K"),f=t("6Kf1");function d(){var n=Object(s.useRouter)(),e=Object(a.useContext)(f.b);e.user;return(0,e.useSession)(),Object(a.useEffect)((function(){(function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i.a,"/orders/confirm"),{method:"POST",body:JSON.stringify({checkout_session:n.query.session_id}),headers:{"Content-Type":"application/json"}});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),n.push("/")}),[]),Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"\xa1Gracias por tu compra!"})})}}},[["3MQS",0,2,1]]]);