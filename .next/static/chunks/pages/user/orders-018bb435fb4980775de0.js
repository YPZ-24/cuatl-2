_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{"1BBf":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/orders",function(){return n("boiI")}])},"1iKp":function(e,t,n){"use strict";var a=n("TqRt"),r=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("q1tI")),i=(0,a(n("8/g6")).default)(o.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=i},"6Kf1":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("nKUr"),r=n("vJKn"),o=n.n(r),i=n("rg98"),s=n("20a2"),c=n("q1tI"),d=n("VS8K"),u=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.includes("id_token")?d.b:"",e.next=3,fetch(n+t);case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",{token:r.jwt,user:{id:r.user.id,username:r.user.username,email:r.user.email,avatar:r.user.avatar?r.user.avatar.formats.thumbnail:null}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=Object(c.createContext)(null);t.b=l;function p(e){var t=e.children,n=Object(c.useState)(null),r=n[0],d=n[1],p=Object(s.useRouter)(),b=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("id_token"in p.query)&&!("access_token"in p.query)){e.next=7;break}return e.next=3,u(location.search);case 3:t=e.sent,p.replace("/"),sessionStorage.setItem("session",JSON.stringify(t)),d(t.user);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){try{return JSON.parse(sessionStorage.getItem("session"))}catch(e){return console.error(e.message),null}};return Object(a.jsx)(l.Provider,{value:{user:r,login:b,logout:function(){sessionStorage.removeItem("session"),d(null),p.push("/")},getToken:function(){return f().token},isUserLoggedIn:function(){return!!f()},useSession:function(){Object(c.useEffect)((function(){var e=f();d(null===e||void 0===e?void 0:e.user)}),[])}},children:t})}},"8udc":function(e,t,n){"use strict";var a=n("vJKn"),r=n.n(a),o=n("rg98"),i=n("VS8K"),s=function(){return function(){try{return JSON.parse(sessionStorage.getItem("session"))}catch(e){return console.error(e.message),null}}().token};function c(){return(c=Object(o.a)(r.a.mark((function e(t){var n,a,o,c,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,a=t.path,o=t.body,e.prev=1,e.next=4,fetch(i.a+a,{method:n,body:JSON.stringify(o),headers:{"Content-type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(s())}});case 4:return c=e.sent,e.next=7,c.json();case 7:return d=e.sent,e.abrupt("return",d);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}t.a=function(e){return c.apply(this,arguments)}},VS8K:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s}));var a="https://cuatl.shop/api",r=12,o="https://cuatl.shop/api/connect/google",i="".concat(a,"/auth/google/callback"),s="pk_test_51Hw15gJ4rvPOyPXnQ6Rjf7X4RxmsSBqvTVy3h3Bfwdo2WddlWAgC64bzfHeQbn4V5jJpPrJ7eHeWrGQMWOlRzW8700mrQLCJpL"},boiI:function(e,t,n){"use strict";n.r(t);var a=n("nKUr"),r=n("vJKn"),o=n.n(r),i=n("rg98"),s=n("q1tI"),c=n("VS8K"),d=n("6Kf1"),u=n("bCPq"),l=n("tRbT"),p=n("ofer"),b=n("wx14"),f=n("DSFK"),h=n("25BE"),j=n("BsWD"),m=n("PYwp");var x=n("ODXe"),v=n("Ff2n"),O=(n("TOwV"),n("17x9"),n("iuhU")),g=n("JQEk"),y=n("kKAo"),w=n("H2TA");var k=s.createContext({}),R=n("yCxk"),C=s.forwardRef((function(e,t){var n,a=e.children,r=e.classes,o=e.className,i=e.defaultExpanded,c=void 0!==i&&i,d=e.disabled,u=void 0!==d&&d,l=e.expanded,p=e.onChange,w=e.square,C=void 0!==w&&w,I=e.TransitionComponent,N=void 0===I?g.a:I,S=e.TransitionProps,E=Object(v.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),B=Object(R.a)({controlled:l,default:c,name:"Accordion",state:"expanded"}),T=Object(x.a)(B,2),_=T[0],A=T[1],P=s.useCallback((function(e){A(!_),p&&p(e,!_)}),[_,p,A]),K=s.Children.toArray(a),q=(n=K,Object(f.a)(n)||Object(h.a)(n)||Object(j.a)(n)||Object(m.a)()),J=q[0],L=q.slice(1),M=s.useMemo((function(){return{expanded:_,disabled:u,toggle:P}}),[_,u,P]);return s.createElement(y.a,Object(b.a)({className:Object(O.a)(r.root,o,_&&r.expanded,u&&r.disabled,!C&&r.rounded),ref:t,square:C},E),s.createElement(k.Provider,{value:M},J),s.createElement(N,Object(b.a)({in:_,timeout:"auto"},S),s.createElement("div",{"aria-labelledby":J.props.id,id:J.props["aria-controls"],role:"region"},L)))})),I=Object(w.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(C),N=n("VD++"),S=n("PsDL"),E=s.forwardRef((function(e,t){var n=e.children,a=e.classes,r=e.className,o=e.expandIcon,i=e.IconButtonProps,c=e.onBlur,d=e.onClick,u=e.onFocusVisible,l=Object(v.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),p=s.useState(!1),f=p[0],h=p[1],j=s.useContext(k),m=j.disabled,x=void 0!==m&&m,g=j.expanded,y=j.toggle;return s.createElement(N.a,Object(b.a)({focusRipple:!1,disableRipple:!0,disabled:x,component:"div","aria-expanded":g,className:Object(O.a)(a.root,r,x&&a.disabled,g&&a.expanded,f&&a.focused),onFocusVisible:function(e){h(!0),u&&u(e)},onBlur:function(e){h(!1),c&&c(e)},onClick:function(e){y&&y(e),d&&d(e)},ref:t},l),s.createElement("div",{className:Object(O.a)(a.content,g&&a.expanded)},n),o&&s.createElement(S.a,Object(b.a)({className:Object(O.a)(a.expandIcon,g&&a.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},i),o))})),B=Object(w.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(E),T=n("wb2y"),_=s.forwardRef((function(e,t){var n=e.classes,a=e.className,r=Object(v.a)(e,["classes","className"]);return s.createElement("div",Object(b.a)({className:Object(O.a)(n.root,a),ref:t},r))})),A=Object(w.a)((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(_),P=n("/EAt"),K=n("Imu7"),q=n("sRsu"),J=n("3PeG"),L=n("Uf6+"),M=n("1iKp"),V=n.n(M),U=n("1sxy"),$=n("20a2"),z=n("8udc"),D=n("NKQG");t.default=function(){var e=Object(D.b)().enqueueSnackbar,t=Object(s.useContext)(d.b).getToken,n=Object(s.useContext)(u.b).setOrder,r=Object(s.useState)([]),b=r[0],f=r[1],h=Object($.useRouter)(),j=function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(z.a)({method:"POST",path:"/orders/confirm",body:{checkout_session:n}});case 2:(a=t.sent)._id&&e("Listo: ".concat(a.status.toUpperCase()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function m(){return(m=Object(i.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.next=5,fetch("".concat(c.a,"/orders"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 5:return e.next=7,e.sent.json();case 7:a=e.sent,f(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){var e=h.asPath,t=e.search("="),a=e.slice(t+1);-1!=t&&(j(a),n([]),h.push("/user/orders"))}),[]),Object(s.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(l.a,{container:!0,spacing:5,children:[Object(a.jsx)(l.a,{item:!0,xs:12,children:Object(a.jsx)(p.a,{variant:"h4",align:"center",children:"MIS COMPRAS"})}),Object(a.jsx)(l.a,{item:!0,xs:12,children:b.map((function(e){return Object(a.jsxs)(I,{children:[Object(a.jsx)(B,{expandIcon:Object(a.jsx)(V.a,{}),children:Object(a.jsxs)(l.a,{container:!0,spacing:2,children:[Object(a.jsxs)(l.a,{item:!0,xs:8,children:[Object(a.jsx)(p.a,{gutterBottom:!0,variant:"overline",children:new Date(e.createdAt).toLocaleString()}),Object(a.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",children:e.status}),Object(a.jsx)(p.a,{variant:"subtitle1",children:Object(U.a)("MXN",e.total)})]}),Object(a.jsx)(l.a,{item:!0,xs:1,children:Object(a.jsx)(T.a,{orientation:"vertical"})}),Object(a.jsx)(l.a,{item:!0,xs:3,style:{display:"flex",alignItems:"center"},children:Object(a.jsx)(p.a,{variant:"h6",children:e.delivery_status.toUpperCase()})})]})}),Object(a.jsx)(A,{children:Object(a.jsxs)(P.a,{size:"small",children:[Object(a.jsx)(K.a,{children:Object(a.jsxs)(q.a,{children:[Object(a.jsx)(J.a,{align:"center",children:"ARTICULO"}),Object(a.jsx)(J.a,{align:"center",children:"COLOR"}),Object(a.jsx)(J.a,{align:"center",children:"TAMA\xd1O"})]})}),Object(a.jsx)(L.a,{children:e.variants.map((function(e){return Object(a.jsxs)(q.a,{children:[Object(a.jsx)(J.a,{children:e.name}),Object(a.jsx)(J.a,{align:"center",children:e.color}),Object(a.jsx)(J.a,{align:"center",children:e.size})]},"Variant-".concat(e.id))}))})]})})]},"Order-".concat(e.id))}))})]})})}},kKAo:function(e,t,n){"use strict";var a=n("Ff2n"),r=n("wx14"),o=n("q1tI"),i=(n("17x9"),n("iuhU")),s=n("H2TA"),c=o.forwardRef((function(e,t){var n=e.classes,s=e.className,c=e.component,d=void 0===c?"div":c,u=e.square,l=void 0!==u&&u,p=e.elevation,b=void 0===p?1:p,f=e.variant,h=void 0===f?"elevation":f,j=Object(a.a)(e,["classes","className","component","square","elevation","variant"]);return o.createElement(d,Object(r.a)({className:Object(i.a)(n.root,s,"outlined"===h?n.outlined:n["elevation".concat(b)],!l&&n.rounded),ref:t},j))}));t.a=Object(s.a)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Object(r.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(c)},wb2y:function(e,t,n){"use strict";var a=n("wx14"),r=n("Ff2n"),o=n("q1tI"),i=(n("17x9"),n("iuhU")),s=n("H2TA"),c=n("ye/S"),d=o.forwardRef((function(e,t){var n=e.absolute,s=void 0!==n&&n,c=e.classes,d=e.className,u=e.component,l=void 0===u?"hr":u,p=e.flexItem,b=void 0!==p&&p,f=e.light,h=void 0!==f&&f,j=e.orientation,m=void 0===j?"horizontal":j,x=e.role,v=void 0===x?"hr"!==l?"separator":void 0:x,O=e.variant,g=void 0===O?"fullWidth":O,y=Object(r.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return o.createElement(l,Object(a.a)({className:Object(i.a)(c.root,d,"fullWidth"!==g&&c[g],s&&c.absolute,b&&c.flexItem,h&&c.light,"vertical"===m&&c.vertical),role:v,ref:t},y))}));t.a=Object(s.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(c.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(d)}},[["1BBf",0,1,2,3,4,5,8,7,10,14]]]);