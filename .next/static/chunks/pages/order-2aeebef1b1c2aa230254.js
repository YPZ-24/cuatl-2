_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"1sxy":function(e,t,r){"use strict";t.a=function(e,t){var r=parseFloat(String(t)).toFixed(2);return"".concat(e.toUpperCase()," ").concat(r)}},NiTD:function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSP",(function(){return G})),r.d(t,"default",(function(){return R}));var n=r("nKUr"),c=r("g4pe"),a=r.n(c),s=r("q1tI"),o=r.n(s),i=r("o0o1"),l=r.n(i),d=r("HaE+"),u="https://js.stripe.com/v3",j=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,b="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",f=null,p=function(e){return null!==f?f:f=new Promise((function(t,r){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(b),window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(u,'"]')),t=0;t<e.length;t++){var r=e[t];if(j.test(r.src))return r}return null}();n&&e?console.warn(b):n||(n=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(u).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r}(e)),n.addEventListener("load",(function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){r(new Error("Failed to load Stripe.js"))}))}catch(c){return void r(c)}else t(null)}))},x=function(e,t,r){if(null===e)return null;var n=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.13.2",startTime:t})}(n,r),n},h=Promise.resolve().then((function(){return p(null)})),m=!1;h.catch((function(e){m||console.warn(e)}));var O=r("VS8K"),v=r("6Kf1"),w=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];m=!0;var n=Date.now();return h.then((function(e){return x(e,t,n)}))}(O.g),y=function(e){var t=e.order,r=Object(s.useContext)(v.b).getToken,c=function(){var e=Object(d.a)(l.a.mark((function e(){var n,c,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w;case 2:return n=e.sent,e.next=5,r();case 5:return c=e.sent,e.next=8,fetch("".concat(O.a,"/orders"),{method:"POST",body:JSON.stringify({order:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 8:return a=e.sent,e.next=11,a.json();case 11:return s=e.sent,e.next=14,n.redirectToCheckout({sessionId:s.id});case 14:e.sent;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("button",{onClick:c,className:"flex flex-row flex-nowrap items-center justify-center font-bold px-4 py-3 rounded-lg bg-accent text-base shadow hover:bg-inactive hover:text-primary",children:"Continuar al pago"})};y.default={order:[]};var g=y,N=r("9SqW"),E=r("jelM"),S=r("1sxy"),P=function(e){var t=e.order,r=Object(s.useState)(null),c=r[0],a=r[1];return Object(s.useEffect)((function(){for(var e={subtotal:0,delivery_price:0,total:0},r=0;r<t.length;r++)e.subtotal+=t[r].product.price*t[r].quantity;e.total=e.subtotal+e.delivery_price,a(e)}),[t]),Object(n.jsx)(n.Fragment,{children:c&&Object(n.jsxs)("table",{className:"table-auto md:w-max md:justify-self-end",children:[Object(n.jsx)("thead",{children:Object(n.jsx)("tr",{children:Object(n.jsx)("th",{children:"Resumen de compra"})})}),Object(n.jsxs)("tbody",{className:"border-b-2 border-t-2 border-inactive",children:[Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)("br",{})})}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Subtotal"}),Object(n.jsx)("td",{children:Object(S.a)(c.subtotal)})]}),Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)("span",{})})}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Env\xedo"}),Object(n.jsx)("td",{children:Object(S.a)(c.delivery_price)})]}),Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)("br",{})})})]}),Object(n.jsx)("tfoot",{className:"md:font-bold",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Total"}),Object(n.jsx)("td",{children:Object(S.a)(c.total)})]})})]})})};P.defaultProps={order:[]};var k=P,C=r("17x9"),_=r.n(C);function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var L=Object(s.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,c=e.size,a=void 0===c?24:c,s=T(e,["color","size"]);return o.a.createElement("svg",z({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),o.a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))}));L.propTypes={color:_.a.string,size:_.a.oneOfType([_.a.string,_.a.number])},L.displayName="X";var B=L,q=r("qGP1"),H=r("ip4w"),A=function(e){var t=e.order;return Object(n.jsxs)("table",{className:"table-auto md:w-full md:text-center",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Producto"}),Object(n.jsx)("th",{children:"Descripci\xf3n"}),Object(n.jsx)("th",{children:"Cantidad"}),Object(n.jsx)("th",{children:"Precio"}),Object(n.jsx)("th",{children:"Quitar"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e,t){return Object(n.jsxs)("tr",{className:"border-t-2 border-inactive",children:[Object(n.jsx)("td",{children:Object(n.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden md:m-auto",children:Object(n.jsx)("img",{src:Object(H.a)(e.product.cover),alt:e.product.name,className:"object-center"})})}),Object(n.jsxs)("td",{children:[Object(n.jsx)("div",{style:{backgroundColor:q[e.variant.color.trim().toLowerCase()]},className:"h-3 w-3 rounded-full inline-block"}),Object(n.jsx)("span",{className:"text-secondary mx-2",children:"/"}),Object(n.jsx)("span",{children:e.variant.size}),Object(n.jsx)("span",{className:"text-secondary mx-2",children:"/"}),Object(n.jsx)("span",{children:e.variant.pattern})]}),Object(n.jsx)("td",{children:e.quantity}),Object(n.jsx)("td",{children:e.product.price}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{children:Object(n.jsx)(B,{})})})]},t)}))})]})};A.defaultProps={order:[]};var M=A,G=!0;function R(e){var t=e.departments,r=Object(s.useContext)(v.b),c=(r.user,r.useSession),o=Object(s.useState)([]),i=o[0];o[1];return c(),Object(n.jsxs)("div",{className:"h-screen max-w-full",children:[Object(n.jsxs)(a.a,{children:[Object(n.jsx)("title",{children:"Cuatl - Bolsa de compras"}),Object(n.jsx)("meta",{name:"description",content:"Tu bolsa de compras"})]}),Object(n.jsx)(N.a,{menuEntries:t}),Object(n.jsxs)("div",{className:"md:bg-bse md:shadow md:m-12 md:p-12 md:rounded-xl",children:[Object(n.jsx)("h1",{className:"md:font-display md:text-3xl md:mb-12",children:"Bolsa de compras"}),Object(n.jsx)("div",{style:{maxHeight:"calc(100% - 6rem)"},className:"md:flex md:flex-row md:flex-nowrap",children:0===i.length?Object(n.jsxs)("p",{className:"md:w-full md:flex md:flex-row md:flex-nowrap md:justify-center md:items-center md:text-center",children:["Parece que a\xfan no tienes productos en tu bolsa.",Object(n.jsx)("br",{}),"\xa1Vamos, agrega algunos!"]}):Object(n.jsxs)("div",{className:"md:grid md:grid-cols-4 md:gap-12 md:w-full",children:[Object(n.jsx)("div",{className:"md:col-span-2",children:Object(n.jsx)(M,{order:i})}),Object(n.jsx)("div",{className:"md:col-span-1 md:col-start-4",children:Object(n.jsx)(k,{order:i})}),Object(n.jsx)("div",{className:"md:col-span-full md:justify-self-end md:mt-12",children:Object(n.jsx)(g,{order:i})})]})})]}),Object(n.jsx)(E.b,{page:E.a.BAG})]})}},"SK/p":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order",function(){return r("NiTD")}])},jelM:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return P}));var n=r("nKUr"),c=r("YFqc"),a=r.n(c),s=r("q1tI"),o=r.n(s),i=r("17x9"),l=r.n(i);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var j=Object(s.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,c=e.size,a=void 0===c?24:c,s=u(e,["color","size"]);return o.a.createElement("svg",d({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),o.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"}))}));j.propTypes={color:l.a.string,size:l.a.oneOfType([l.a.string,l.a.number])},j.displayName="Home";var b=j,f=r("Ud0y"),p=r("XmX0");function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}var m=Object(s.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,c=e.size,a=void 0===c?24:c,s=h(e,["color","size"]);return o.a.createElement("svg",x({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),o.a.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))}));m.propTypes={color:l.a.string,size:l.a.oneOfType([l.a.string,l.a.number])},m.displayName="MessageCircle";var O=m,v=r("6Kf1"),w=r("bCPq");P.defaultProps={page:"home"};var y,g="\n    fixed\n    bg-bse\n    bottom-0\n    flex\n    flex-nowrap\n    flex-row\n    md:hidden\n    overflow-hidden\n    rounded-t-2xl\n    shadow\n    w-full\n    z-50\n  ",N={container:"\n      flex\n      flex-1\n      flex-col\n      flex-nowrap\n      font-bold\n      h-16\n      items-center\n      justify-center\n      relative\n      transition-all\n    "},E={itemsCounter:"\n      absolute\n      border-2\n      border-bse\n      flex\n      flex-nowrap\n      flex-row\n      font-bold\n      h-5\n      items-center\n      justify-center\n      right-6\n      rounded-full\n      text-bse\n      w-5\n    "},S={bag:{itemsCounter:{fontSize:"0.75rem"}}};function P(e){var t=e.page,r=Object(s.useContext)(v.b).user,c=Object(s.useContext)(w.b).countProducts,o=Object(s.useState)(t),i=o[0],l=o[1];return Object(n.jsxs)("nav",{className:g,children:[Object(n.jsx)(a.a,{href:"/",children:Object(n.jsxs)("a",{onClick:function(){return l(y.HOME)},className:N.container+(i===y.HOME?"text-accent":"text-secondary"),children:[Object(n.jsx)(b,{}),Object(n.jsx)("span",{className:i===y.HOME?"":"hidden",children:"Inicio"})]})}),Object(n.jsx)(a.a,{href:r?"/order":"/auth",children:Object(n.jsxs)("a",{onClick:function(){return l(y.BAG)},className:N.container+(i===y.BAG?"text-accent":"text-secondary"),children:[Object(n.jsx)("div",{className:E.itemsCounter+(i===y.BAG?"bg-accent top-1":"bg-secondary top-3"),style:S.bag.itemsCounter,children:c()}),Object(n.jsx)(f.a,{}),Object(n.jsx)("span",{className:i===y.BAG?"":"hidden",children:"Bolsa"})]})}),Object(n.jsx)(a.a,{href:r?"/user/profile":"/auth",children:Object(n.jsxs)("a",{onClick:function(){return l(y.USER)},className:N.container+(i===y.USER?"text-accent":"text-secondary"),children:[Object(n.jsx)(p.a,{}),Object(n.jsx)("span",{className:i===y.USER?"":"hidden",children:"Yo"})]})}),Object(n.jsx)(a.a,{href:"/help",children:Object(n.jsxs)("a",{onClick:function(){return l(y.HELP)},className:N.container+(i===y.HELP?"text-accent":"text-secondary"),children:[Object(n.jsx)(O,{}),Object(n.jsx)("span",{className:i===y.HELP?"":"hidden",children:"Ayuda"})]})})]})}!function(e){e.HOME="home",e.BAG="bag",e.USER="user",e.HELP="help"}(y||(y={}))},qGP1:function(e){e.exports=JSON.parse('{"amarillo":"#fbdc58","azul":"#4fbcdc","azul marino":"#000080","blanco":"#ffffff","naranja":"#fe7f46","negro":"#120e0f","guinda":"#bd3e55","rojo":"#ff0000","verde":"#6fc421","vino":"#a3195b"}')}},[["SK/p",0,2,1,3,4]]]);