{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{Lvf5:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/payment/delivery\",function(){return n(\"xHbI\")}])},xHbI:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return b}));var r=n(\"o0o1\"),c=n.n(r),a=n(\"HaE+\"),s=n(\"nKUr\"),u=n(\"g4pe\"),o=n.n(u),i=n(\"20a2\"),d=n(\"q1tI\"),f=n(\"VS8K\"),p=n(\"6Kf1\");function b(){var e=Object(d.useContext)(p.b),t=e.user,n=e.getToken,r=Object(i.useRouter)(),u=function(e,t){var n=Object(d.useState)([]),r=n[0],s=n[1];return Object(d.useEffect)((function(){!function(){var n=Object(a.a)(c.a.mark((function n(){var r,a,u;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=17;break}return n.prev=1,n.next=4,t();case 4:return r=n.sent,n.next=7,fetch(\"\".concat(f.a,\"/orders\"),{headers:{Authorization:\"Bearer \".concat(r)}});case 7:return a=n.sent,n.next=10,a.json();case 10:u=n.sent,s(u),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),s([]);case 17:case\"end\":return n.stop()}}),n,null,[[1,14]])})));return function(){return n.apply(this,arguments)}}()()}),[e]),r}(t,n);return Object(d.useEffect)((function(){t||r.push(\"/sign_in\")}),[]),Object(s.jsxs)(\"div\",{children:[Object(s.jsxs)(o.a,{children:[Object(s.jsx)(\"title\",{children:\"Cuatl - Bolsa de compras\"}),Object(s.jsx)(\"meta\",{name:\"description\",content:\"\\xd3rdenes de compra en Cuatl\"})]}),u?u.map((function(e){return Object(s.jsxs)(\"div\",{children:[new Date(e.createdAt).toLocaleDateString(\"es-MX\"),e.product.name,e.total,e.status]},\"order.id\")})):Object(s.jsx)(\"div\",{children:\"Sin \\xf3rdenes\"})]})}}},[[\"Lvf5\",0,2,1,3]]]);","map":{"version":3,"sources":["static/chunks/pages/payment/delivery-dce7a7fb2a422cc7ff9d.js"],"names":["_N_E","window","push","Lvf5","module","exports","__webpack_require__","__NEXT_P","xHbI","__webpack_exports__","r","d","BagPage","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__","next_head__WEBPACK_IMPORTED_MODULE_3__","next_head__WEBPACK_IMPORTED_MODULE_3___default","next_router__WEBPACK_IMPORTED_MODULE_4__","react__WEBPACK_IMPORTED_MODULE_5__","_config_globals__WEBPACK_IMPORTED_MODULE_6__","_context_AuthContext__WEBPACK_IMPORTED_MODULE_7__","_useContext","Object","user","getToken","router","orders","_useState","setOrders","_ref","a","mark","_callee","token","response","_orders","wrap","_context","prev","next","sent","fetch","concat","headers","Authorization","json","t0","stop","apply","this","arguments","fetchOrders","useOrders","children","name","content","map","order","Date","createdAt","toLocaleDateString","product","total","status"],"mappings":"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"},"name":"static/chunks/pages/payment/delivery-dce7a7fb2a422cc7ff9d.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[15],{\n\n/***/ \"Lvf5\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/payment/delivery\",\n      function () {\n        return __webpack_require__(\"xHbI\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"xHbI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BagPage; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"g4pe\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _config_globals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"VS8K\");\n/* harmony import */ var _context_AuthContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"6Kf1\");\n\n\n\n\n\n\n\n\n\n\nvar useOrders = function useOrders(user, getToken) {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])([]),\n      orders = _useState[0],\n      setOrders = _useState[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    var fetchOrders = /*#__PURE__*/function () {\n      var _ref = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n        var token, response, _orders;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!user) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.prev = 1;\n                _context.next = 4;\n                return getToken();\n\n              case 4:\n                token = _context.sent;\n                _context.next = 7;\n                return fetch(\"\".concat(_config_globals__WEBPACK_IMPORTED_MODULE_6__[/* API_DOMAIN */ \"a\"], \"/orders\"), {\n                  headers: {\n                    'Authorization': \"Bearer \".concat(token)\n                  }\n                });\n\n              case 7:\n                response = _context.sent;\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                _orders = _context.sent;\n                setOrders(_orders);\n                _context.next = 17;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](1);\n                setOrders([]);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 14]]);\n      }));\n\n      return function fetchOrders() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchOrders();\n  }, [user]);\n  return orders;\n};\n\nfunction BagPage() {\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(_context_AuthContext__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"b\"]),\n      user = _useContext.user,\n      getToken = _useContext.getToken;\n\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_4__[\"useRouter\"])();\n  var orders = useOrders(user, getToken);\n  Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n    if (!user) {\n      router.push('/sign_in');\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(\"div\", {\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(next_head__WEBPACK_IMPORTED_MODULE_3___default.a, {\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"title\", {\n        children: \"Cuatl - Bolsa de compras\"\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"meta\", {\n        name: \"description\",\n        content: \"\\xD3rdenes de compra en Cuatl\"\n      })]\n    }), orders ? orders.map(function (order) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(\"div\", {\n        children: [new Date(order.createdAt).toLocaleDateString('es-MX'), order.product.name, order.total, order.status]\n      }, \"order.id\");\n    }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {\n      children: \"Sin \\xF3rdenes\"\n    })]\n  });\n}\n;\n\n/***/ })\n\n},[[\"Lvf5\",0,2,1,3]]]);"}