{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { useContext, useEffect } from 'react';\nimport { Box, Camera, CreditCard, LogOut, MapPin } from 'react-feather';\nimport { getDepartments } from '@/actions/fetch-departments';\nimport AuthContext from '@/context/AuthContext';\nimport { initializeApolloClient } from '@/lib/apollo-client';\nimport useViewport from '@/utils/use-viewport';\nimport Navigationbar from '@/components/navbars/Navigationbar';\nimport Omnibar from '@/components/navbars/Omnibar';\nimport Tabbar, { TAB_PAGES } from '@/components/navbars/Tabbar';\nimport CircleAvatar from '@/components/avatars/CircleAvatar';\nconst styles = {\n  tailwind: {\n    pageContainer: `\n      flex\n      flex-col\n      flex-nowrap\n      h-screen\n      overflow-hidden\n      w-screen\n    `,\n    mainContent: {\n      container: `\n        flex-1\n        mb-24\n        overflow-y-scroll\n        w-full\n      `,\n      heading: {\n        container: `\n          bg-bse\n          m-6\n          py-6\n          rounded-xl\n          shadow\n        `,\n        photo: {\n          container: `\n            flex\n            flex-nowrap\n            flex-row\n            items-center\n            justify-center\n            relative\n            w-full\n          `,\n          cameraButton: `\n            absolute\n            bg-accent\n            flex\n            flex-nowrap\n            flex-row\n            h-12\n            items-center\n            justify-center\n            right-4\n            rounded-full\n            shadow\n            text-bse\n            w-12\n          `\n        },\n        username: `\n          font-display\n          font-bold\n          py-6\n          text-2xl\n          text-center\n        `\n      },\n      menu: {\n        container: `\n          m-6\n        `,\n        item: {\n          container: `\n            bg-accent\n            flex\n            flex-nowrap\n            flex-row\n            font-bold\n            items-center\n            my-6\n            rounded-lg\n            shadow\n            text-bse\n            w-full\n          `,\n          icon: `\n            flex\n            flex-nowrap\n            flex-row\n            items-center\n            justify-center\n            h-16\n            w-16\n          `\n        }\n      },\n      logoutButton: {\n        container: `\n          flex\n          flex-nowrap\n          flex-row\n          font-bold\n          items-center\n          m-6\n        `,\n        icon: `\n          flex\n          flex-nowrap\n          flex-row\n          font-bold\n          h-16\n          items-center\n          justify-center\n          p-2\n          rounded-lg\n          rotate-180\n          transform\n          w-16\n        `\n      }\n    },\n    generic: {\n      link: `\n        text-accent\n      `\n    }\n  }\n};\nexport default function UserProfilePage({\n  departments,\n  referer\n}) {\n  const {\n    user,\n    useSession,\n    isUserLoggedIn,\n    logout\n  } = useContext(AuthContext);\n  const router = useRouter();\n  const viewport = useViewport();\n\n  const closeSession = event => {\n    event.preventDefault();\n    logout();\n  };\n\n  const uploadPhoto = event => {\n    event.preventDefault();\n  };\n\n  useEffect(() => {\n    if (!isUserLoggedIn()) router.push('/auth');\n  }, []);\n  useSession();\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.tailwind.pageContainer,\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Cuatl - La mejor moda artesanal de M\\xE9xico\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: \"Encuentra los mejores productos artesanales de M\\xE9xico\"\n      })]\n    }), viewport.width < 768 ? /*#__PURE__*/_jsx(Navigationbar, {\n      referer: referer\n    }) : /*#__PURE__*/_jsx(Omnibar, {\n      menuEntries: departments\n    }), user && /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.tailwind.mainContent.container,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.tailwind.mainContent.heading.container,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.tailwind.mainContent.heading.photo.container,\n          children: [/*#__PURE__*/_jsx(CircleAvatar, {\n            avatar: user === null || user === void 0 ? void 0 : user.avatar,\n            size: \"32\"\n          }), /*#__PURE__*/_jsx(\"a\", {\n            className: styles.tailwind.mainContent.heading.photo.cameraButton,\n            onClick: event => uploadPhoto(event),\n            children: /*#__PURE__*/_jsx(Camera, {})\n          })]\n        }), /*#__PURE__*/_jsx(\"h1\", {\n          className: styles.tailwind.mainContent.heading.username,\n          children: user === null || user === void 0 ? void 0 : user.username\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.tailwind.mainContent.menu.container,\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/user/orders\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: styles.tailwind.mainContent.menu.item.container,\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              className: styles.tailwind.mainContent.menu.item.icon,\n              children: /*#__PURE__*/_jsx(Box, {})\n            }), /*#__PURE__*/_jsx(\"span\", {\n              children: \"Mis compras\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/user/address\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: styles.tailwind.mainContent.menu.item.container,\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              className: styles.tailwind.mainContent.menu.item.icon,\n              children: /*#__PURE__*/_jsx(MapPin, {})\n            }), /*#__PURE__*/_jsx(\"span\", {\n              children: \"Mis direcciones\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/user/payment-methods\",\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            className: styles.tailwind.mainContent.menu.item.container,\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              className: styles.tailwind.mainContent.menu.item.icon,\n              children: /*#__PURE__*/_jsx(CreditCard, {})\n            }), /*#__PURE__*/_jsx(\"span\", {\n              children: \"Mis m\\xE9todos de pago\"\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: /*#__PURE__*/_jsxs(\"a\", {\n          className: styles.tailwind.mainContent.logoutButton.container,\n          onClick: event => closeSession(event),\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: styles.tailwind.mainContent.logoutButton.icon,\n            children: /*#__PURE__*/_jsx(LogOut, {})\n          }), /*#__PURE__*/_jsx(\"span\", {\n            children: \"Cerrar sesi\\xF3n\"\n          })]\n        })\n      })]\n    }), viewport.width < 768 && /*#__PURE__*/_jsx(Tabbar, {\n      page: TAB_PAGES.USER\n    })]\n  });\n}\n;\nexport const getServerSideProps = async ({\n  req\n}) => {\n  const apolloClient = initializeApolloClient();\n  const departments = await getDepartments(apolloClient);\n  return {\n    props: {\n      departments,\n      referer: req.headers.referer || '/'\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module"}