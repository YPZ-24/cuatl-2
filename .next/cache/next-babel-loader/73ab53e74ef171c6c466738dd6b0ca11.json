{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { ShoppingBag } from 'react-feather';\nAddToBagButton.defaultProps = {\n  order: null\n};\nvar classes = {\n  container: \"\\n    bg-accent\\n    cursor-pointer\\n    flex\\n    flex-row\\n    flex-nowrap\\n    items-center\\n    hover:bg-inactive\\n    hover:text-primary\\n    justify-center\\n    font-bold\\n    px-4\\n    py-3\\n    rounded-lg\\n    text-bse\\n    shadow\\n  \"\n};\nexport default function AddToBagButton(_ref) {\n  var order = _ref.order;\n\n  var setOrder = function setOrder(activeOrder) {\n    localStorage.setItem('order', JSON.stringify(activeOrder));\n  };\n\n  var getOrder = function getOrder() {\n    try {\n      return JSON.parse(localStorage.getItem('order')) || [];\n    } catch (error) {}\n\n    return [];\n  };\n\n  var addProductToBag = function addProductToBag(event) {\n    event.preventDefault();\n    var activeOrder = getOrder();\n    var quantitySelector = document.getElementById('quantity');\n    var variantQuantity = parseInt(quantitySelector.value); //: if the product and variant is already there\n\n    var indexOfOrderItem = activeOrder.findIndex(function (orderItem) {\n      return orderItem.variant.id === order.variant.id;\n    });\n\n    if (indexOfOrderItem !== -1) {\n      //: update quantity\n      var currentQuantity = activeOrder[indexOfOrderItem].quantity;\n\n      if (currentQuantity + variantQuantity <= order.variant.stock) {\n        activeOrder[indexOfOrderItem].quantity = currentQuantity + variantQuantity;\n      }\n    } else {\n      activeOrder.push({\n        product: order.product,\n        variant: order.variant,\n        quantity: variantQuantity,\n        offers: order.offers\n      });\n    }\n\n    setOrder(activeOrder);\n  };\n\n  return /*#__PURE__*/_jsxs(\"a\", {\n    onClick: function onClick(e) {\n      return addProductToBag(e);\n    },\n    className: classes.container,\n    children: [/*#__PURE__*/_jsx(\"span\", {\n      className: \"mr-3\",\n      children: /*#__PURE__*/_jsx(ShoppingBag, {})\n    }), /*#__PURE__*/_jsx(\"span\", {\n      children: \"A\\xF1adir a la bolsa\"\n    })]\n  });\n}\n;","map":null,"metadata":{},"sourceType":"module"}