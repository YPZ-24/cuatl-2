{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useContext } from 'react';\nimport { Formik, Form } from 'formik';\nimport MyInput from '../../components/inputs/MyInput';\nimport { Container, Typography, Button } from '@material-ui/core';\nimport * as Yup from 'yup';\nimport myFetch from '../../utils/myFetch';\nimport OrderContext from '@/context/OrderContext';\nimport { STRIPE_PUBLISHED_KEY } from '@/config/globals';\nimport { loadStripe } from '@stripe/stripe-js';\nconst stripePromise = loadStripe(STRIPE_PUBLISHED_KEY);\n\nfunction address() {\n  const {\n    order\n  } = useContext(OrderContext);\n\n  const handleSubmit = async values => {\n    if (!values.noExt) values.noExt = 0;\n    const stripe = await stripePromise;\n    const address = await myFetch({\n      method: 'POST',\n      path: `/addresses`,\n      body: values\n    });\n    const session = await myFetch({\n      method: 'POST',\n      path: '/orders',\n      body: {\n        order,\n        address: address.id\n      }\n    });\n    const result = await stripe.redirectToCheckout({\n      sessionId: session.id\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(Container, {\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsx(Typography, {\n      variant: \"h5\",\n      align: \"center\",\n      children: \"DIRECCI\\xD3N\"\n    }), /*#__PURE__*/_jsx(Formik, {\n      initialValues: {\n        estado: '',\n        delegacion: '',\n        colonia: '',\n        calle: '',\n        noInt: 0,\n        noExt: 0,\n        cp: 0\n      },\n      onSubmit: values => handleSubmit(values),\n      validationSchema: Yup.object().shape({\n        estado: Yup.string().required(),\n        delegacion: Yup.string().required(),\n        colonia: Yup.string().required(),\n        calle: Yup.string().required(),\n        noInt: Yup.number().min(1).required(),\n        noExt: Yup.number(),\n        cp: Yup.number().min(1).required()\n      }),\n      children: /*#__PURE__*/_jsxs(Form, {\n        children: [/*#__PURE__*/_jsx(MyInput, {\n          label: \"Estado\",\n          name: \"estado\"\n        }), /*#__PURE__*/_jsx(MyInput, {\n          label: \"Delegaci\\xF3n\",\n          name: \"delegacion\"\n        }), /*#__PURE__*/_jsx(MyInput, {\n          label: \"Colonia\",\n          name: \"colonia\"\n        }), /*#__PURE__*/_jsx(MyInput, {\n          label: \"Calle\",\n          name: \"calle\"\n        }), /*#__PURE__*/_jsx(MyInput, {\n          label: \"No. Interior\",\n          name: \"noInt\"\n        }), /*#__PURE__*/_jsx(MyInput, {\n          label: \"No. Exterior\",\n          name: \"noExt\"\n        }), /*#__PURE__*/_jsx(MyInput, {\n          label: \"C\\xF3digo Postal\",\n          name: \"cp\"\n        }), /*#__PURE__*/_jsx(Button, {\n          fullWidth: true,\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          children: \"SAVE\"\n        })]\n      })\n    })]\n  });\n}\n\nexport default address;","map":null,"metadata":{},"sourceType":"module"}