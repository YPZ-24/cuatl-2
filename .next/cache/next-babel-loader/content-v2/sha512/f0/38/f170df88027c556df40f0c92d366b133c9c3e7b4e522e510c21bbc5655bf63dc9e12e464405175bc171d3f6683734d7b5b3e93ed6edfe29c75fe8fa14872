{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/DELL/Desktop/cuatl-2/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/DELL/Desktop/cuatl-2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\cuatl-2\\\\components\\\\buttons\\\\PaymentButton.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport { useContext } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useRouter } from 'next/router';\nimport { STRIPE_PUBLISHED_KEY, API_DOMAIN } from '@/config/globals';\nimport AuthContext from '@/context/AuthContext';\nimport Button from '@material-ui/core/Button';\nvar stripePromise = loadStripe(STRIPE_PUBLISHED_KEY);\n\nvar PaymentButton = function PaymentButton(_ref) {\n  _s();\n\n  var order = _ref.order;\n\n  var _useContext = useContext(AuthContext),\n      getToken = _useContext.getToken;\n\n  var router = useRouter();\n\n  var handlePayment = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              /*\r\n              const stripe = await stripePromise;\r\n              const token = await getToken();\r\n                const response = await fetch(`${API_DOMAIN}/orders`, {\r\n                method: 'POST',\r\n                body: JSON.stringify({ order }),\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                  'Authorization': `Bearer ${token}`\r\n                }\r\n              });\r\n              const session = await response.json();\r\n              \r\n              const result = await stripe.redirectToCheckout({\r\n                sessionId: session.id\r\n              });*/\n              router.push('/user/address');\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handlePayment() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      fullWidth: true,\n      children: \"Continuar la compra\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      className: \"flex flex-row flex-nowrap items-center justify-center font-bold px-4 py-3 rounded-lg bg-accent text-base shadow hover:bg-inactive hover:text-primary\",\n      children: \"Continuar al pago\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(PaymentButton, \"qYKTSDCc9rrWOu8d2Bops+JkgOQ=\", false, function () {\n  return [useRouter];\n});\n\n_c = PaymentButton;\nPaymentButton.propTypes = {\n  order: PropTypes.array\n};\nPaymentButton[\"default\"] = {\n  order: []\n};\nexport default PaymentButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentButton\");","map":{"version":3,"sources":["C:/Users/DELL/Desktop/cuatl-2/components/buttons/PaymentButton.js"],"names":["PropTypes","useContext","loadStripe","useRouter","STRIPE_PUBLISHED_KEY","API_DOMAIN","AuthContext","Button","stripePromise","PaymentButton","order","getToken","router","handlePayment","push","propTypes","array"],"mappings":";;;;;;;;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA,SAASC,oBAAT,EAA+BC,UAA/B,QAAiD,kBAAjD;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAEA,IAAMC,aAAa,GAAGN,UAAU,CAACE,oBAAD,CAAhC;;AAEA,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,OAAe;AAAA;;AAAA,MAAZC,KAAY,QAAZA,KAAY;;AAAA,oBACdT,UAAU,CAACK,WAAD,CADI;AAAA,MAC3BK,QAD2B,eAC3BA,QAD2B;;AAEnC,MAAMC,MAAM,GAAGT,SAAS,EAAxB;;AAEA,MAAMU,aAAa;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AACpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEID,cAAAA,MAAM,CAACE,IAAP,CAAY,eAAZ;;AAlBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbD,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAqBA,sBAEF;AAAA,4BACI,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,KAAK,EAAC,SAAlC;AAA4C,MAAA,SAAS,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAQI;AACE,MAAA,OAAO,EAAEA,aADX;AAEE,MAAA,SAAS,EAAC,sJAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARJ;AAAA,kBAFE;AAkBD,CA3CD;;GAAMJ,a;UAEWN,S;;;KAFXM,a;AA6CNA,aAAa,CAACM,SAAd,GAA0B;AACxBL,EAAAA,KAAK,EAAEV,SAAS,CAACgB;AADO,CAA1B;AAIAP,aAAa,WAAb,GAAwB;AACtBC,EAAAA,KAAK,EAAE;AADe,CAAxB;AAIA,eAAeD,aAAf","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useContext } from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { useRouter } from 'next/router';\r\n\r\nimport { STRIPE_PUBLISHED_KEY, API_DOMAIN } from '@/config/globals';\r\nimport AuthContext from '@/context/AuthContext';\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst stripePromise = loadStripe(STRIPE_PUBLISHED_KEY);\r\n\r\nconst PaymentButton = ({ order }) => {\r\n  const { getToken } = useContext(AuthContext);\r\n  const router = useRouter();\r\n\r\n  const handlePayment = async () => {\r\n    /*\r\n    const stripe = await stripePromise;\r\n    const token = await getToken();\r\n\r\n    const response = await fetch(`${API_DOMAIN}/orders`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ order }),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    const session = await response.json();\r\n    \r\n    const result = await stripe.redirectToCheckout({\r\n      sessionId: session.id\r\n    });*/\r\n    router.push('/user/address');\r\n  };\r\n\r\n  return (\r\n\r\n<>\r\n    <Button variant=\"contained\" color=\"primary\" fullWidth>\r\n      Continuar la compra\r\n    </Button>\r\n\r\n\r\n\r\n\r\n    <button\r\n      onClick={handlePayment}\r\n      className=\"flex flex-row flex-nowrap items-center justify-center font-bold px-4 py-3 rounded-lg bg-accent text-base shadow hover:bg-inactive hover:text-primary\"\r\n    >\r\n      Continuar al pago\r\n    </button>\r\n    </>\r\n  );\r\n};\r\n\r\nPaymentButton.propTypes = {\r\n  order: PropTypes.array\r\n};\r\n\r\nPaymentButton.default = {\r\n  order: []\r\n};\r\n\r\nexport default PaymentButton;\r\n"]},"metadata":{},"sourceType":"module"}