{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\cuatl-2\\\\pages\\\\user\\\\orders.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { API_DOMAIN } from '@/config/globals';\nimport AuthContext from '@/context/AuthContext';\nimport { Accordion, AccordionSummary, Typography, AccordionDetails, Grid, Divider, Table, TableHead, TableBody, TableRow, TableCell } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport formatPrice from '@/utils/format-price';\nimport { useRouter } from 'next/router';\nimport myFetch from '../../utils/myFetch';\n\nfunction orders() {\n  const {\n    getToken\n  } = useContext(AuthContext);\n  const {\n    0: userOrders,\n    1: setUserOrders\n  } = useState([]);\n  const router = useRouter();\n\n  const confirmOrder = async sessionId => {\n    const order = await myFetch({\n      method: 'POST',\n      path: `/orders/confirm`,\n      body: {\n        checkout_session: sessionId\n      }\n    });\n    console.log(\"OR\");\n    console.log(order);\n    console.log(order._id); //router.push('/user/orders')\n  };\n\n  useEffect(() => {\n    const path = router.asPath;\n    const i = path.search(\"=\");\n    const sessionId = path.slice(i + 1);\n    if (sessionId) confirmOrder(sessionId);\n  }, []);\n\n  async function getUserOrders() {\n    const token = await getToken();\n    const response = await (await fetch(`${API_DOMAIN}/orders`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    })).json();\n    setUserOrders(response);\n  }\n\n  useEffect(() => {\n    getUserOrders();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 5,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          align: \"center\",\n          children: \"MIS COMPRAS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: userOrders.map(o => /*#__PURE__*/_jsxDEV(Accordion, {\n          children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n            expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 63\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 8,\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  gutterBottom: true,\n                  variant: \"overline\",\n                  children: new Date(o.createdAt).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  gutterBottom: true,\n                  variant: \"subtitle1\",\n                  children: o.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"subtitle1\",\n                  children: formatPrice('MXN', o.total)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 66,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 1,\n                children: /*#__PURE__*/_jsxDEV(Divider, {\n                  orientation: \"vertical\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 3,\n                style: {\n                  display: \"flex\",\n                  alignItems: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  children: o.delivery_status.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              size: \"small\",\n              children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                children: /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: \"ARTICULO\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: \"COLOR\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 89,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: \"TAMA\\xD1O\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                children: o.variants.map(v => /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: v.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: v.color\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: v.size\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 53\n                  }, this)]\n                }, `Variant-${v.id}`, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 33\n          }, this)]\n        }, `Order-${o.id}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\nexport default orders;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/cuatl-2/pages/user/orders.js"],"names":["React","useContext","useEffect","useState","API_DOMAIN","AuthContext","Accordion","AccordionSummary","Typography","AccordionDetails","Grid","Divider","Table","TableHead","TableBody","TableRow","TableCell","ExpandMoreIcon","formatPrice","useRouter","myFetch","orders","getToken","userOrders","setUserOrders","router","confirmOrder","sessionId","order","method","path","body","checkout_session","console","log","_id","asPath","i","search","slice","getUserOrders","token","response","fetch","headers","json","map","o","Date","createdAt","toLocaleString","status","total","display","alignItems","delivery_status","toUpperCase","variants","v","name","color","size","id"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react'\r\nimport { API_DOMAIN } from '@/config/globals';\r\nimport AuthContext from '@/context/AuthContext';\r\nimport { Accordion, AccordionSummary, Typography, AccordionDetails, Grid, Divider, Table, TableHead, TableBody, TableRow, TableCell } from '@material-ui/core'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport formatPrice from '@/utils/format-price';\r\nimport { useRouter } from 'next/router';\r\nimport myFetch from '../../utils/myFetch'\r\n\r\nfunction orders() {\r\n\r\n    const { getToken } = useContext(AuthContext);\r\n    const [userOrders, setUserOrders] = useState([])\r\n    const router = useRouter();\r\n\r\n    const confirmOrder = async (sessionId) => {\r\n        const order = await myFetch({\r\n            method: 'POST', \r\n            path: `/orders/confirm`, \r\n            body: { checkout_session: sessionId }\r\n        })\r\n        console.log(\"OR\")\r\n        console.log(order)\r\n        console.log(order._id)\r\n        //router.push('/user/orders')\r\n    };\r\n\r\n    useEffect(() => {\r\n        const path = router.asPath\r\n        const i = path.search(\"=\")\r\n        const sessionId = path.slice(i+1)\r\n        if(sessionId) confirmOrder(sessionId);\r\n      }, []);\r\n\r\n    async function getUserOrders(){\r\n        const token = await getToken();\r\n        const response = await (await fetch(`${API_DOMAIN}/orders`, {\r\n            method: 'GET',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${token}`\r\n            }\r\n          })).json()\r\n          setUserOrders(response)\r\n    }\r\n    \r\n    useEffect(()=>{\r\n        getUserOrders()\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Grid container spacing={5}>\r\n                <Grid item xs={12}>\r\n                    <Typography variant=\"h4\" align=\"center\">MIS COMPRAS</Typography>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    {\r\n                        userOrders.map((o)=>(\r\n                            <Accordion  key={`Order-${o.id}`} >\r\n                                <AccordionSummary expandIcon={<ExpandMoreIcon />} >\r\n                                <Grid container spacing={2}>\r\n                                <Grid item xs={8}>\r\n                                    <Typography gutterBottom variant=\"overline\" >{new Date(o.createdAt).toLocaleString()}</Typography>\r\n                                    <Typography gutterBottom variant=\"subtitle1\" >{o.status}</Typography>\r\n                                    <Typography variant=\"subtitle1\" >{formatPrice('MXN',o.total)}</Typography>\r\n                                </Grid>\r\n                                <Grid item xs={1}>\r\n                                    <Divider orientation=\"vertical\" />\r\n                                </Grid>\r\n                                <Grid item xs={3} style={{\r\n                                        display: \"flex\",\r\n                                        alignItems: \"center\"\r\n                                    }}\r\n                                >\r\n                                    <Typography variant=\"h6\">{o.delivery_status.toUpperCase()}</Typography>\r\n                                </Grid>\r\n                                </Grid>\r\n                                \r\n                                </AccordionSummary>\r\n\r\n                                <AccordionDetails>\r\n                                    <Table size=\"small\">\r\n                                        <TableHead>\r\n                                            <TableRow>\r\n                                                <TableCell align=\"center\" >\r\n                                                    ARTICULO\r\n                                                </TableCell>\r\n                                                <TableCell align=\"center\" >\r\n                                                    COLOR\r\n                                                </TableCell>\r\n                                                <TableCell align=\"center\" >\r\n                                                    TAMAÑO\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        </TableHead>\r\n                                        <TableBody>\r\n                                            {o.variants.map((v)=>(\r\n                                                <TableRow key={`Variant-${v.id}`}>\r\n                                                    <TableCell>\r\n                                                        {v.name}\r\n                                                    </TableCell>\r\n                                                    <TableCell align=\"center\" >\r\n                                                        {v.color}\r\n                                                    </TableCell>\r\n                                                    <TableCell align=\"center\" >\r\n                                                        {v.size}\r\n                                                    </TableCell>\r\n                                                </TableRow>      \r\n                                            ))}\r\n                                        </TableBody>\r\n                                    </Table>\r\n                                </AccordionDetails>         \r\n                            </Accordion>\r\n                        ))\r\n                    }\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default orders"]},"metadata":{},"sourceType":"module"}