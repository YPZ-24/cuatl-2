{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/DELL/Desktop/AAAA/cuatl-2/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/DELL/Desktop/AAAA/cuatl-2/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useRouter } from 'next/router';\nimport { useContext, useEffect, useState } from 'react';\nimport { API_DOMAIN } from '@/config/globals';\nimport AuthContext from '@/context/AuthContext';\n\nvar useOrders = function useOrders(user, getToken) {\n  var _useState = useState([]),\n      orders = _useState[0],\n      setOrders = _useState[1];\n\n  useEffect(function () {\n    var fetchOrders = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var token, response, _orders;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!user) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.prev = 1;\n                _context.next = 4;\n                return getToken();\n\n              case 4:\n                token = _context.sent;\n                _context.next = 7;\n                return fetch(\"\".concat(API_DOMAIN, \"/orders\"), {\n                  headers: {\n                    'Authorization': \"Bearer \".concat(token)\n                  }\n                });\n\n              case 7:\n                response = _context.sent;\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                _orders = _context.sent;\n                setOrders(_orders);\n                _context.next = 17;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](1);\n                setOrders([]);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 14]]);\n      }));\n\n      return function fetchOrders() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchOrders();\n  }, [user]);\n  return orders;\n};\n\nexport default function BagPage() {\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      getToken = _useContext.getToken;\n\n  var router = useRouter();\n  var orders = useOrders(user, getToken);\n  useEffect(function () {\n    if (!user) {\n      router.push('/sign_in');\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: orders ? orders.map(function (order) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [new Date(order.createdAt).toLocaleDateString('es-MX'), order.product.name, order.total, order.status]\n      }, \"order.id\");\n    }) : /*#__PURE__*/_jsx(\"div\", {\n      children: \"Sin \\xF3rdenes\"\n    })\n  });\n}\n;","map":null,"metadata":{},"sourceType":"module"}