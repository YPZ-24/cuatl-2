{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useRouter } from 'next/router';\nimport { useContext, useEffect, useState } from 'react';\nimport { API_DOMAIN } from '@/config/globals';\nimport AuthContext from '@/context/AuthContext';\n\nconst useOrders = (user, getToken) => {\n  const {\n    0: orders,\n    1: setOrders\n  } = useState([]);\n  useEffect(() => {\n    const fetchOrders = async () => {\n      if (user) {\n        try {\n          const token = await getToken();\n          const response = await fetch(`${API_DOMAIN}/orders`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          const orders = await response.json();\n          setOrders(orders);\n        } catch (error) {\n          setOrders([]);\n        }\n      }\n    };\n\n    fetchOrders();\n  }, [user]);\n  return orders;\n};\n\nexport default function BagPage() {\n  const {\n    user,\n    getToken\n  } = useContext(AuthContext);\n  const router = useRouter();\n  const orders = useOrders(user, getToken);\n  useEffect(() => {\n    if (!user) {\n      router.push('/sign_in');\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: orders ? orders.map(order => /*#__PURE__*/_jsxs(\"div\", {\n      children: [new Date(order.createdAt).toLocaleDateString('es-MX'), order.product.name, order.total, order.status]\n    }, \"order.id\")) : /*#__PURE__*/_jsx(\"div\", {\n      children: \"Sin \\xF3rdenes\"\n    })\n  });\n}\n;","map":null,"metadata":{},"sourceType":"module"}