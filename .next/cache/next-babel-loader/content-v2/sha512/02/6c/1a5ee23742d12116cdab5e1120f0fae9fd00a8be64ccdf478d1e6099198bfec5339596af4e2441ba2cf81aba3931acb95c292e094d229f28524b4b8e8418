{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { getDepartments } from '@/actions/fetch-departments';\nimport { getProductBySlug } from \"@/actions/fetch-products\";\nimport AddToBagButton from '@/components/buttons/AddToBagButton';\nimport Carousel from '@/components/carousels/Carousel';\nimport QuantitySelector from '@/components/controls/QuantitySelector';\nimport VariantSelector from '@/components/controls/VariantSelector';\nimport OffersSelector from '@/components/controls/OffersSelector';\nimport { initializeApolloClient } from \"@/lib/apollo-client\";\nimport formatPrice from '@/utils/format-price';\nimport { Grid, Card, Typography, CardContent } from '@material-ui/core';\nexport default function ProductDetailsPage({\n  departments,\n  product,\n  referer\n}) {\n  const {\n    0: selectedVariant,\n    1: setSelectedVariant\n  } = useState(null);\n  const {\n    0: selectedOffers,\n    1: setSelectedOffers\n  } = useState([]);\n  return /*#__PURE__*/_jsxs(Grid, {\n    container: true,\n    spacing: 2,\n    children: [/*#__PURE__*/_jsx(Grid, {\n      item: true,\n      xs: 12,\n      md: 6,\n      children: /*#__PURE__*/_jsx(Card, {\n        children: /*#__PURE__*/_jsx(CardContent, {\n          children: /*#__PURE__*/_jsxs(Grid, {\n            container: true,\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxs(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsx(Typography, {\n                variant: \"h6\",\n                children: product.name\n              }), /*#__PURE__*/_jsx(Typography, {\n                variant: \"h4\",\n                children: formatPrice('MXN', product.price)\n              }), /*#__PURE__*/_jsx(Typography, {\n                variant: \"subtitle1\",\n                gutterBottom: true,\n                children: product.description\n              })]\n            }), product.variants.length !== 0 ? /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsx(VariantSelector, {\n                state: [selectedVariant, setSelectedVariant],\n                variants: product.variants\n              })\n            }) : null, product.offers.length !== 0 ? /*#__PURE__*/_jsxs(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsx(Typography, {\n                variant: \"body2\",\n                children: \"OFERTAS\"\n              }), /*#__PURE__*/_jsx(OffersSelector, {\n                offers: product.offers,\n                state: [selectedOffers, setSelectedOffers]\n              })]\n            }) : null, selectedVariant ? /*#__PURE__*/_jsxs(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsx(Typography, {\n                variant: \"body2\",\n                children: \"CANTIDAD\"\n              }), /*#__PURE__*/_jsx(QuantitySelector, {\n                stock: selectedVariant.stock\n              }), /*#__PURE__*/_jsxs(Typography, {\n                variant: \"caption\",\n                children: [\"\\xA1\", selectedVariant.stock, \" disponibles!\"]\n              })]\n            }) : null, product && selectedVariant ? /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsx(AddToBagButton, {\n                order: {\n                  offers: selectedOffers,\n                  product,\n                  variant: selectedVariant\n                }\n              })\n            }) : null]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(Grid, {\n      item: true,\n      xs: 12,\n      md: 6,\n      children: /*#__PURE__*/_jsx(Carousel, {\n        media: product.media\n      })\n    })]\n  });\n}\n;\nexport const getServerSideProps = async ({\n  params,\n  req\n}) => {\n  const apolloClient = initializeApolloClient();\n  const departments = await getDepartments(apolloClient);\n  const product = await getProductBySlug(apolloClient, params.slug);\n  return {\n    props: {\n      departments,\n      product,\n      referer: req.headers.referer || '/'\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module"}